-> MERKWÜRDIGES VERHALTEN
	-> ASCENDING CONNECTED verhält sich unter BEST_NEIGHBORHOOD fast gleich wie der reine asset->cash markt, assets->bonds werden fast garnicht gehandelt und die simulation bleibt hängen
		-> bei BEST_GLOBAL_OFFERS ist dies nicht so, es läuft zwar extrem langsam aber asset->bonds werden viel mehr gehandelt
	-> FULL CONNECTED verhält sich unter BEST_NEIGHBORHOOD "richtig" d.h. wie BEST_GLOBAL_OFFERS d.h. es werden viele assets->bonds gehandelt
	=> globales offer-book verhalten noch genauer untersuchen, wahrscheinlich liegt es daran
		-> die topologie allein kann nciht das problem sein, denn auch GLOBAL_OFFERS berücksichtigt die nachbarschaftsbeziehungen
		-> unterschied: GLOBAL_OFFERS behält mehr im offer-book, BEST_NEIGHBORHOOD nur aktuelle nachbarschaften
	
	-> globales vs. lokales offer-book
	
	Untersuchen:
	wie konvergiert BEST_NEIGHBORHOOD und BEST_GLOBAL_OFFERS in ASCENDING_CONNECTED?
	eventuell kann es zu keiner vernünftigen konvergenz in diesem neztwerk kommen wenn die märkte so gekoppelt sind wie bei ASSET->LOAN?
	wahrscheinlich braucht es zusätzliche bedingungen z.b. "genügend" (unscharfer begriff) vernetztheit
	-> BEST_GLOBAL_OFFERS konvergiert nicht wie das FULLY_CONNECTED. abbruch nach 25.000 TX ohne erfolg, 1600sec. (heimrechner)
	-> BEST_NEIGHBORHOOD konvergiert ebenfalls nicht wie das FULLY_CONNECTED. abbruch nach 25.000 TX ohne erfolg, 1600sec. (heimrechner)
		-> beide zeigen aber unterschiedliche endstadien: 
			-> BEST_NEIGHBORHOOD konvergiert zuerst wie ASSET->CASH markt, erst dann werden bonds gehandelt
			-> BEST_GLOBAL_OFFERS handelt bonds schon zu beginn wobei es von den beiden extremen her zu handeln beginnt (die matches passieren nur dort zu beginn)
				dies liegt am globalen offer book, da durch den dominate-aufruf auf den offers nur die in den beiden extremen übrig bleiben
	
	=> VERMUTUNG: für diese gekopelten märkte reicht die hypothese nicht aus um auf das gleichgewicht wie in fully_connected zu kommen
		-> "genügend" vernetzt: experimente gemacht ausgehend von ASCENDING_CONNECTED und dann jeden Agenten mit N darauffolgende Nachbaren verbinden
			-> ascending random shortcuts, wo jeder agent +1 kante zu einem zufälligen hat führt auch nicht zu gleichgewicht
		-> wenn N = Anzahl Agenten - 1, dann erreicht man Vollvernetztheit
		=> mit steigender N erfolgt annäherung an das gleichgewicht, nun ist die frage ob N eine funktion der Anzahl der Agenten ist
		
		-> die gleichungen untersuchen: wieso kommt es hier zu keinem match mehr?
			-> wie werden die offers berechnet?
			-> matching-bedingungen: AND-Verknünpft, müssen beide true sein
				-> käufer muss mindestens oder mehr für das asset bieten als der verkäufer haben will
				-> käufer muss weniger für den loan haben wollen als der verkäufer geben will
				
		-> wahrscheinlich ist die wahrscheinlichkeit gegen 0 dass bids bzw. asks getätigt werden die sich in der direkten nachbarschaft treffen
		-> es muss eine verbindung zu nachbarn sein wobei es nicht reicht z.b. immer nur zum 5. nachbar zu verbinden, es müssen auch die dazwischenliegenden verbunden werden
			-> der extremfall ist dann fully_connected
			
	=> Weg über Gleichgewichtsfeststellung
		-> Wenn kein Agent mehr mit einem anderen handeln kann d.h. wenn kein Agent mehr in der Lage ist ein Offer zu machen, das ein andere NACHBAR matchen kann, 
			dann ist das Gleichgewicht erreicht.
		
	=> Folgende Zustände 
		1. Cash & Assets vorhanden: handelt beide Märkte (Asset->Cash und Asset->Loan)
			-> Asset-Cash Markt: nur jeweils ein Bestes Angebot für Bid und Ask gibt, da auf diesem Markt eine lineare Ordnung auf die
				Angebote gibt, da nur auf den ASset Preis vergleicht wird.
				-> Verkaufs-Preis des Asset: 	zufällig aus [ limitPreis, pU ]
				-> Kauf-Preis des Asset:		zufällig aus [ pD, limitPreis ]
			-> Asset->Loan Markt: kann eine vielzahl an Besten Angeboten für Bid und Ask haben, da es eben keine lineare Ordnung sondern eine Pareto-Front gibt
				-> Verkaufs-Preis: ?
				-> Kauf-Preis: ?
				-> Pareto-Front: hier dominieren die angebote nicht linear sondern über eine pareto-front, da ein gebot besser ist, wenn der asset-preis niedriger/höher UND der loan-preis höher/niedriger ist
					=> ACHTUNG: nur bei ASKs, bei Bids scheint es linear zu verlaufen?
				-> "Loans Taken": "kaufe" ein asset gegen loan d.h. der bider bekommt ein asset, der asker einen loan.
				-> "Loans Given": "verkaufe" ein asset gegen loan d.h. der asker bekommt einen loan, der bider ein asset.
					-> jeder der beiden erwartet sich einen UP bzw. DOWN zustand und wählt entsprechend seine preise
				
		2. Keine Assets vorhanden
			-> Kein Ask (verkauf) mehr für assets
			-> Kein Ask (verkauf) mehr auf Asset against Loan, da kein Asset mehr vorhanden ist, das kollateralisiert werden kan
			-> Wenn noch Cash vorhanden, dann Bid (kauf) auf Asset against Loan d.h. "Loans Taken" erhöht sich 
		3. Kein Cash vorhanden
			-> Kein Bid (kauf) mehr für assets
			-> Bids (kauf) auf asset against loan
			-> Wenn noch Assets vorhanden, dann Ask (sell) auf Asset against Loan d.h. "Loans Given" erhöht sich
			
	=> Wenn ASCENDING_CONNECTED wird zuerst durch die lineare ordnung und durch die bedingungen, ab wann asset->loan gehandelt wird zuerst das
		asset->cash gleichgewicht erreicht, erst dann findet der erste asset->loan handel statt!
		-> könnte ein grund sein wieso das gleichgewicht dann bei ascending connected nicht erreicht wird, denn bei FULLY_CONNECTED wird schon wesentlich früher begonnen mit asset->loan zu handeln
		-> ACHTUNG: dies stimmt nur ungefähr, d.h. es ist relativ wahrscheinlich, dass das asset-cash gleichgewicht zuerst erreicht wird, d.h. 
		
	=> die erste Asset->Loan transaktion findet dann statt, wenn der erste agent erstmals ein bid (kauf) eines assets gegen loan anbietet: Loans Taken
		-> verkäufer gibt es genug, da ask gebote ständig gemacht werden von allen agents, die asset haben: Loan Given
		-> käufer gibt es erst ab dem moment wo der erste agent kein cash mehr hat, da agents wenn ihnen das cash ausgeht angebote für den kauf eines assets gegen loan machen
		
	=> berechnen wie groß das h zwischen zwei agenten sein muss um mit einer bestimmten wahrscheinlichkeit einen match zu erreichen
		-> klar ist: um so größer die distanz umso höher die wahrscheinlichkeit und umgekehrt um so kleiner die distanz um so niedriger die wahrscheinlichkeit
			-> so was ähnliches wie ein konfidenzinterval?
			-> existiert schon von HV, noch ausweiten!
			
	=> Asset-Cash Markt
		-> jeder Agent hat einen optimismus-faktor h, der die wahrscheinlichkeit für einen up-state angibt. Assets sind "morgen" pU=1.0 im UP-State und pD=0.2 im DOWN-State wert.
			d.h. der erwartete wert eines assets berechnet sich für einen agenten mit limitPriceAsset = h*pU + (1-h)*pD
		-> Agenten versuchen natürlich beim handeln gewinn zu machen, wobei dies natürlich über die wahl eines entsprechenden preises geschieht
		-> Kauft ein Agent ein Asset, bietet er natürlich WENIGER als den Wert den er annimmt, den das Asset "morgen" wert sein wird - limitPriceAsset - da wenn er mehr bietet einen verlust machen würde:
			bietet er mehr würde der zustand eintreten auf den er gewettet hat (h), so hätte er für das asset mehr bezahlt als es morgen wert ist und somit hat er einen verlust gemacht
			somit bietet er für den kauf eines assets immer im Bereich [ pD, limitPriceAsset ], denn so macht er immer einen Gewinn - BASIEREND AUF SEINER UTILITY (die sich nie ändert)!
		-> Verkauft ein Agent ein Asset, bietet er natürlich MEHR als limitPriceAsset, da wenn er weniger bietet einen verlust machen würde - siehe analog zum käufer 
			somit bietet er für den kauf eines assets immer im bereich [ limitPriceAsset, pU ]
		-> Zwei Angebote (Kauf und Verkauf) treffen sich, wenn der käufer mehr für ein Asset bietet als der Verkäufer dafür haben will. Daraus folgt, dass der Käufer ein höheres h haben muss als der Verkäufer.
			Deshalb "bewegt" sich die Vermögensverteilung der Assets auch am Beginn der Simulation von links (niedrige h) nach rechts (hohes h), da sich Preisbereiche nur eines Käufers mit einem größeren h
			mit dem eines Verkäufers mit niedrigerem h überschneiden. Somit kann es nie einen Verkäufer mit einem größeren h als des eines Käufers geben.
			Dies macht auch sinn, da die Agenten mit niedrigem h den wert ihres assets als niedriger einschätzen und es somit loswerden möchten, Agenten mit großem h aber das asset als viel wertvoller einschätzen
			und somit versuchen assets von - ihrer ansicht nach - billigen verkäufern zu kaufen, da es basierend auf ihrer utility eben "morgen" mehr wert sein wird als dies der pessimist annimmt - daraus ergibt sich der gewinn.
			Loswerden: sie bieten in einer wesentlich größeren preisspanne als die optimisten, weshalb ihnen die optimisten mit viel höherer wahrscheinlichkeit das asset abkaufen
		-> Der Käufer empfindet den handel als gewinn, da er für "morgen" einen höheren wert für das asset annimmt als er dafür gezahlt hat.
		-> Der Verkäufer empfindet den handel ebenfalls als gewinn, da er für "morgen" einen niedrigeren wert für das asset annimt als er dafür bekommen hat.
			
	=> Asset-Loan Markt
		-> Kauf und Verkauf eines Assets analog zu Asset-Cash Markt
		-> Kaufen: bedeutet dass man kein Cash mehr hat und nun ein Asset für einen Loan kauft. Das Asset besitzt man, es ist aber kollateralisiert d.h. der anteil den man gekauft hat
			dient als sicherheit für den Loan, den man aufgenommen hat (Loan Taken). Diesen Assetanteil kann man nicht weiter verkaufen.
		-> Verkaufen: bedeutet dass wenn man noch FREIE (d.h. unkollateralisierte) assets besitzt, man diese für einen loan verkaufen kann d.h. man gibt einen loan (Loan Given). 
			Man besitzt also nicht mehr Cash sondern einen loan.
		-> Was ist ein Loan: ist ein "schuldschein", der ein Face-Value V hat welcher der Wert ist, der "morgen" zurückgezahlt werden muss. 
			Ein Loan muss abgesichert werden, was durch ein Asset passiert.
			Auch Loans werden gehandelt d.h. man kauft einen Bond für einen bestimmten Preis q und muss dann "morgen" V zurückzahlen.
			Kann der Loan "morgen" nicht zurückgezahlt werden, so verliert der Assetbesitzer, der den Loan Taken hat das Asset
			Ist V <= pD, so handelt es sich um einen risikofreien bond, da die Assets im schlechtesten fall "morgen" immer pD wert sein werden
			Daraus folgt, dass risikofreie Bonds bis maximal V gehandelt werden, risikobehaftete bonds aber darüber
		-> Damit ein Handel zustandekommt muss der Käufer einen höheren asset-preis UND einen niedrigeren loan-preis als der verkäufer bieten
			Wieso niedrigerer loan-preis: TODO
		-> Der Käufer empfindet den handel als gewinn, da er den loan-preis so gewählt hat, dass dieser "morgen" einen 
		-> Der Verkäufer empfindet den handel ebenfalls als gewinn, da er 
		
	=> Kein Gleichgewicht bei ASCENDING_CONNECTED
		-> scheint nicht an den matching-wahrscheinlichkeiten zu liegen sondern daran, dass agenten nichtmehr in der lage sind zu handeln, 
			da sie kein cash und kein asset mehr haben. ist ein agent, der noch handeln könnte (freies asset & cash vorhanden) von zwei
			dieser unhandelbaren umgeben, so hat dieser keine chance mehr zu handeln.
			Agenten brauchen zusätzliche beziehungen zu weiter entfernen und mehreren nachbarn um bei ausfall eines nachbarn weiter handeln zu können.
		-> das nachträgliche hinzufügen von verbindungen zwischen agenten die noch handeln können führt (wie erwartet) nichtmehr zum gleichgewicht
			-> die handelsbeziehungen müssen schon von beginn an entsprechend existieren, da es sonst nicht zu einem gleichgewicht kommt
			-> vermutung: die matching-wahrscheinlichkeiten sind hier nicht relevant?
		-> bidofferings machen auch wenn cash vorhanden führt zu keiner merkbaren veränderung
		-> wie kommt es zu diesen "löchern" bzw. "verschiebungen" bzw. "inselbildung"?
			-> vermutung liegt wahrscheinlich in der natur der topologie: h1<h2<h3<h4<h5 wobei h1&h2 handeln und h4&h5: dadurch passiert eine art von inselbidlung und die handelscontinuität bricht
		-> wie hoch ist die wahrscheinlichkeit dafür bzw. wie kann man das mathematisch ausdrücken?
		
	=> Beim ASCENDING_CONNECTED scheint der marginal buyer bei 0.6 zu liegen, bei FULLY_CONNECTED bei 0.7 ??
		-> die topologie führt dazu, dass die agents bei ASCENDING_CONNECTED um 0.6 mehr cash bzw. mehr assets als im FULLY_CONNECTED halten
		
	=> Bei Asset-Cash Market only kommt es zu keiner terminierung, da ein paar benachbarte agenten > 0.6 noch minimal cash halten und somit bid-offers machen
		diese bid-offers sind aber zu niedrig um ask-offers von benachbarten agenten mit niedrigerem h zu erfüllen
		-> ursache: die käufer haben einfach zuwenig geld um entsprechend mitbieten zu können, somit kommt es niemehr zu einem match
			-> möglichkeit: dies in die abbruch bedingung einbauen!
		-> es wird 0.5 als asset-amount geboten: wieso?
			-> leicht andere mengenauswahl als bei agentswithloan, ist so programmiert. nun geändert auf agentswithloan-implementierung
			wichtig ist aber dass bei agentswithloan genau auf 0 cash herunterkkommen muss, da sonst keine loans gehandelt werden
		-> wieso tritt hier keine inselbildung auf?
			da die assets immer von links nach rechts und das cash von rechts nach links verläuft. TODO: wieso?
		ACHTUNG: habe dies wie bei agentswithloans angepasst, kommt nun  zu einer terminierung
			
	=> Genauer vergleich der dynamiken von FULLY_CONNECTED und ASCENDING_CONNECTED studieren
		-> WESENTLICHER UNTERSCHIED: FULLY_CONNECTED erfüllt immer die global besten offerings, ASCENDING_CONNECTED nur die lokal besten
			-> ist dies einer der gründe, wieso es bei ASCENDING_CONNECTED nicht zu einem gleichgewicht kommt?

	=> Die Matchingwahrscheinlichkeit sagt etwas über die zu erwartende Vermögensverteilung aus
		-> bei FULLY_CONNECTED läuft das natürlich über alle agents global, bei ASCENDING_CONNECTED immer nur paarweise lokal
			-> dies ist der grund wieso es hier zu unterschiedlichen verteilungen kommt
		-> wie kann man das mathematisch beweisen bzw. begründen
		
	=> Asset-Cash markt arbeitet bei ASCENDING_CONNECTED von aussen nach innen weil die matching-wahrscheinlichkeiten von aussen nach innen abnehmen
		d.h. es kommt unter gleichen voraussetzungen der agents mit höherer wahrscheinlichkeit zwischen zwei agenten aussen zu einem match als in der mitte
		-> ACHTUNG: dies scheint laut experimenten unabhängig vom matching-mechanismus (global/lokal) zu sein
	
	=> Asset-Cash markt arbeitet bei FULLY_CONNECTED von aussen nach innen wegen der pareto-front der global-besten offers, die von aussen-nach innen gehen!
		
	=> wie kommt es zu diesen "löchern" bzw. "verschiebungen" bzw. "inselbildung" BEI ASCENDING_CONNECTED!
		-> problem: es wird gehandelt, bis keine free assets mehr vorhanden sind, ist dies erreicht, so scheidet dieser agent aus dem handeln aus
		-> vermutung: die matchingwahrscheinlichkeiten sind dafür verantwortlich, dass nicht gleichmäßig gehandelt wird, sondern dass eben so gehandelt wird, dass es zu löchern kommt
		-> wie zeige ich diese beiden vorherigen aussagen mathematisch?
		
	=> bei FULLY_CONNECTED kommt es nicht zu diesen löchern, da die optimisten von den pessimisten bis 0.6 loans kaufen, was im falle von ASCENDING_CONNECTED ja NICHT möglich ist
	
	=> kein gleichgewicht bedeutet: es gibt "ineffizienzen" d.h. agenten haben noch freie assets, die sie handeln könnten aber andere agenten 
		bieten kein entsprechendes angebot bzw. sind mit ihnen nicht in der nachbarschaft
	
	=> unterschiedliche dynamik zwischen FULLY_CONNECTED und ASCENDING_CONNETED (mit und ohne einschränkung auf asset-loan handel erst wenn kein cash mehr)
		-> FULLY_CONNECTED beginnt schon relativ früh der loan-asset handel, nämlich sobald der erste optimist (meist knapp um 1.0 herum) kein cash mehr hat
			in diesem fall beginnt er bid-offers auf dem asset-loan market zu machen, die ein pessimist < 0.6 erfüllt, da dieser noch freie assets hat und diese loswerden will, auch wenn es für einen bond ist
			d.h. es ist viel mehr asset-vermögen bei den optimisten. dieser transfer ist bei ASCENDING_CONNECTED garnicht möglich.
			ausserdem scheint hier auch die asset-loan vermögensverteilung von links nach rechts bzw. rechts nach links zu verlaufen: 
				die agenten um 0.6 geben loans aus und die optimisten kaufen diese. dies geschieht so lang bis sich die kurve bei 0.7 trifft d.h. alle agenten über 0.7 haben keine free assets mehr und die darunter
				kein cash mehr
				-> dies hat wahrscheinlich mit der globalen pareto-front und der matching-wahrscheinlichkeit (ist beides im grunde dasselbe) zu tun
		-> ASCENDING_CONNETED Hier gibt es verschiedenes verhalten bei unterschiedlichem matching-mechanismus
			GLOBALES_OFFERBOOK
			Hier werden schon sehr früh asset gegen loan gehandelt, da die agenten von aussen nach innen die assets kaufen, ihr cash an pessimisten abgeben und dann, wenn sie kein cash mehr haben, 
			beginnen assets gegen loan von den pessimisten zu kaufen. Somit besitzen auch schon pessimisten einiges an kolateralisierten assets d.h. das gleichgewicht wie im FULL_CONNECTED fall kann auch hier nicht erreicht werden.
			
			LOKALES_OFFERBOOK
			beginnt mit dem loan-asset handel vergleichsweise spät, ca. meist um den zeitpunkt des asset-cash gleichgewichts
			zwar auch erst sobald der erste optimist kein cash mehr hat, aber die bonds werden dann nur unter den optimisten selber vergeben d.h. es ist unmöglich, dass es hier zu einem gleichgewicht kommt
				-> wieso werden die bonds nur unter den optimisten vergeben?
					da die assets von den pessimisten immer aufsteigend zu den optimisten verkauft werden.
					das bedeutet, dass die pessimisten immer cash haben, weshalb auch kein bid-offer auf assets-loan passiert
					aber natürlich gibt es immer eine fixe anzahl an assets im system, sie können also nicht verschwinden, jedoch scheint im falle von ASCNEDING_CONNECTED 
					mehr assets um 0.6 zentriert zu sein als im falle FULLY_CONNECTED
			ausserdem bewegt sich die vermögensverteilung hier auch nicht von links nach rechts bzw. rechts nach links sondern entsprechend eines matches, der aber nur lokal ist



		